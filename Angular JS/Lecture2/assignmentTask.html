<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Student List App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="d-flex mt-5 bg-light align-items-center justify-content-center">
    <div class="container" ng-app="stuList" ng-controller="stuCtrl">
      <div class="form-container">
        <h4 class="text-center mb-4">Student Add Form</h4>

        <form name="submitform" novalidate>
          <div class="mb-3">
            <label class="form-label mb-1 p-2">
              <span class="fs-5">Student Name </span
              ><span class="fst-italic fs-6 text-secondary"
                >(no less than 3 charecters):
              </span>
            </label>
            <input
              type="text"
              name="name"
              class="form-control"
              placeholder="Enter a student name to add it to the list"
              ng-model="stuName"
              required
            />
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            ng-disabled="!stuName || stuName.length < 3"
            ng-click="stuAdd()"
          >
            Add Student
          </button>
          <!-- <div
            ng-show="(submitform.name.$touched )|| stuName.length < 3"
            class="text-danger mt-3"
          >
            Name is required and sould be grater no less than 3 charecters.
          </div> -->
        </form>
      </div>
      <table class="table mt-4" ng-if="stunames.length > 0">
        <thead>
          <tr>
            <th>name</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="name in stunames">
            <td>{{ name }}</td>
            <td>
              <button class="btn btn-danger btn-sm" ng-click="delete($index)">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script>
      var app = angular.module("stuList", []);
      app.controller("stuCtrl", function ($scope) {
        $scope.stunames = [];
        $scope.stuAdd = function () {
          if (!$scope.stunames.includes($scope.stuName)) {
            $scope.stunames.push($scope.stuName);
            $scope.stuName = "";
            $scope.submitform.name.$touched = false;
            $scope.submitform.name.$pristine = true;
          } else {
            alert("This Name exist in the list ");
          }
        };
        $scope.delete = function ($index) {
          $scope.stunames.splice($index, 1);
        };
      });
    </script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
